<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="article">
<meta property="og:title" content="python 多线程扫描及资源冲突锁定应用">
<meta property="og:url" content="https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/">
<meta property="og:site_name" content="Sampson&#39;s blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.buhuixiu.com/images/learn-python-tutorials.jpg">
<meta property="article:published_time" content="2020-07-22T09:01:15.000Z">
<meta property="article:modified_time" content="2020-07-22T09:01:15.000Z">
<meta property="article:author" content="Sampson.Z">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.buhuixiu.com/images/learn-python-tutorials.jpg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>python 多线程扫描及资源冲突锁定应用</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/search/">搜索</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/zhuxinkai.site/">zhuxinkai.site</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇 " href="/2020/07/28/cve-2019-15107%E9%AA%8C%E8%AF%81/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇 " href="/2020/07/20/%E4%BD%BF%E7%94%A8%E9%A2%84%E5%A4%84%E7%90%86%E7%9A%84%E5%8F%82%E6%95%B0%E5%8C%96%E6%9F%A5%E8%AF%A2%E5%B0%B1100-%E5%AE%89%E5%85%A8%E5%90%97%EF%BC%9F%E5%8F%AF%E4%BB%A5%E6%9D%9C%E7%BB%9D%E6%89%80%E6%9C%89%E7%9A%84sql-%E6%B3%A8%E5%85%A5%E5%90%97/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部 " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章 " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&text=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&is_video=false&description=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=python 多线程扫描及资源冲突锁定应用&body=Check out this article: https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&name=python 多线程扫描及资源冲突锁定应用&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&t=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%AF%B9%E5%A4%9A%E4%B8%AA%E4%BA%91%E5%9C%BA%E6%99%AF%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A4%A7%E9%87%8F%E7%9A%84%E8%A7%84%E5%88%99%E8%B0%83%E6%95%B4%EF%BC%8C%E4%B8%B4%E6%97%B6%E8%A7%84%E5%88%99%EF%BC%8C%E5%8F%98%E6%9B%B4%EF%BC%8C%E5%AE%89%E5%85%A8%E7%BB%84%E9%94%99%E8%AF%AF%E9%85%8D%E7%BD%AE%E7%AD%89%E3%80%82%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E5%AF%B9%E5%A4%9A%E4%B8%AA%E4%BA%91%E7%AB%AF%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E8%A1%8C%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F%E3%80%82"><span class="toc-number">1.</span> <span class="toc-text">面对多个云场景的应用，服务器大量的规则调整，临时规则，变更，安全组错误配置等。所以需要对多个云端的服务器进行端口扫描。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">使用说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-%E7%9B%AE%E5%89%8D%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%86%99%E6%AD%BB%E4%BA%86%E7%BA%BF%E7%A8%8B%E6%95%B0%EF%BC%9A50"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">1.1  目前程序中写死了线程数：50</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-%E7%9B%B8%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BB%8E%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%8C%89%E7%85%A7%E9%BB%98%E8%AE%A4%E5%85%A8%E9%83%A8%E6%96%B9%E5%BC%8F%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E3%80%82%E7%9B%B8%E5%BA%94%E7%9A%84%E5%86%85%E7%BD%91IP%E5%92%8C%E5%A4%96%E7%BD%91IP%E5%9C%A8%E7%AC%AC13%EF%BC%8C14%E8%A1%8C%E3%80%82%E5%8D%8E%E4%B8%BA%E4%BA%91%E9%9C%80%E8%A6%81%E5%8D%95%E7%8B%AC%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86%E4%B8%8B%E6%95%B0%E6%8D%AE%E3%80%82%E9%98%BF%E9%87%8C%E4%BA%91%E5%8F%AA%E9%9C%80%E8%A6%81%E6%8F%92%E5%85%A5%E8%A1%8C%E6%95%B0%E6%BB%A1%E8%B6%B3%E5%B0%B1OK"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">1.2 相应的数据从云平台按照默认全部方式导出数据。相应的内网IP和外网IP在第13，14行。华为云需要单独进行处理下数据。阿里云只需要插入行数满足就OK.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-%E5%AF%BC%E5%87%BA%E7%9A%84csv%E6%96%87%E4%BB%B6%E5%8F%AF%E4%BB%A5%E6%94%BE%E5%9C%A8%E5%8D%95%E4%B8%80%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%EF%BC%8C%E6%88%96%E8%80%85%E5%88%86%E5%88%AB%E9%98%B2%E6%AD%A2%E5%9C%A8%E4%B8%89%E4%B8%AA%E8%B7%AF%E5%BE%84%E4%B8%8B%E3%80%82%E5%8F%AF%E4%BB%A5%E6%89%AB%E6%8F%8F%E5%88%B0%E6%89%80%E6%9C%89%E7%9A%84csv%E5%90%8E%E7%BC%80%E6%96%87%E4%BB%B6%E5%90%8D%E3%80%82"><span class="toc-number">2.0.0.3.</span> <span class="toc-text">1.3 导出的csv文件可以放在单一的文件夹下，或者分别防止在三个路径下。可以扫描到所有的csv后缀文件名。</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83"><span class="toc-number">3.</span> <span class="toc-text">环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#threadingportscan-py-%E7%94%A8%E4%BA%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F%E5%8F%8A%E5%B0%86%E7%BB%93%E6%9E%9C%E5%86%99%E5%85%A5csv-%E6%96%87%E4%BB%B6%E4%B8%AD%E3%80%82"><span class="toc-number">4.</span> <span class="toc-text">threadingportscan.py  用于多线程端口扫描及将结果写入csv 文件中。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#checkpms-py-%E7%94%A8%E4%BA%8E%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%E5%99%A8IP%E5%88%97%E8%A1%A8%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%A6%E6%83%85%E4%BF%A1%E6%81%AF%E8%BF%94%E5%9B%9E%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E3%80%82"><span class="toc-number">5.</span> <span class="toc-text">checkpms.py 用于提供服务器IP列表和服务器详情信息返回的两个函数。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python-%E5%9C%A8%E6%80%A7%E8%83%BD%EF%BC%8C%E8%A7%84%E8%8C%83%E5%8C%96%EF%BC%8C%E5%8D%8F%E4%BD%9C%E6%80%A7-%E6%96%B9%E9%9D%A2%E9%83%BD%E8%A2%AB%E5%BE%88%E5%A4%9A%E4%BA%BA%E6%89%80%E8%AF%9F%E7%97%85%E3%80%82-%E5%B8%8C%E6%9C%9B%E6%88%91%E4%BB%AC%E5%9C%A8%E5%86%99%E4%BB%A3%E7%A0%81%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%97%B6%E5%88%BB%E6%B3%A8%E6%84%8F%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%EF%BC%8C%E9%81%BF%E5%85%8D%E5%9C%A8%E4%BB%A3%E7%A0%81%E6%9C%AC%E8%BA%AB%E7%BC%BA%E9%99%B7%E6%96%B9%E9%9D%A2%E4%B8%8D%E5%8A%A0%E4%BB%BB%E4%BD%95%E5%BD%A2%E5%BC%8F%E7%9A%84%E8%A7%84%E9%81%BF%E5%92%8C%E4%BC%98%E5%8C%96%E3%80%82%E6%AF%8F%E7%A7%8D%E8%AF%AD%E8%A8%80%E7%9A%84%E7%89%B9%E7%82%B9%E5%92%8C%E5%8A%A3%E5%8A%BF%E9%83%BD%E6%AF%94%E8%BE%83%E6%98%8E%E6%98%BE%EF%BC%8C%E9%80%89%E6%8B%A9%E4%BA%86%EF%BC%8C%E5%B0%B1%E6%B7%B1%E7%88%B1%EF%BC%8C%E6%B7%B1%E7%88%B1%E5%B0%B1%E8%A6%81%E5%85%B1%E5%90%8C%E8%BF%9B%E6%AD%A5%E3%80%82"><span class="toc-number">6.</span> <span class="toc-text">python 在性能，规范化，协作性 方面都被很多人所诟病。 希望我们在写代码的时候，时刻注意这些问题，避免在代码本身缺陷方面不加任何形式的规避和优化。每种语言的特点和劣势都比较明显，选择了，就深爱，深爱就要共同进步。</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        python 多线程扫描及资源冲突锁定应用
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Sampson.Z</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-07-22T09:01:15.000Z" itemprop="datePublished">2020-07-22</time>
        
        (Updated: <time datetime="2020-07-22T09:01:15.000Z" itemprop="dateModified">2020-07-22</time>)
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/python/" rel="tag">python</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css"><div class=".article-gallery" <p><a href="https://www.buhuixiu.com/images/learn-python-tutorials.jpg" class="gallery-item"><img src="https://www.buhuixiu.com/images/learn-python-tutorials.jpg"></a><p></p>
<h2 id="面对多个云场景的应用，服务器大量的规则调整，临时规则，变更，安全组错误配置等。所以需要对多个云端的服务器进行端口扫描。"><a href="#面对多个云场景的应用，服务器大量的规则调整，临时规则，变更，安全组错误配置等。所以需要对多个云端的服务器进行端口扫描。" class="headerlink" title="面对多个云场景的应用，服务器大量的规则调整，临时规则，变更，安全组错误配置等。所以需要对多个云端的服务器进行端口扫描。"></a>面对多个云场景的应用，服务器大量的规则调整，临时规则，变更，安全组错误配置等。所以需要对多个云端的服务器进行端口扫描。</h2><p>幸运的是，云服务商一般提供了比较详细的服务器配置清单。这份清单可以很方便我们进行端口扫描。从而发现我们在<br>主机安全层，端口安全方面存在的一些问题。比如说，直接开饭22端口。比如说，测试环境的6379 等数据库端口暴露在公网或者内网等。<br>话不多说。直接copy一点点代码。</p>
<h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><h5 id="1-1-目前程序中写死了线程数：50"><a href="#1-1-目前程序中写死了线程数：50" class="headerlink" title="1.1  目前程序中写死了线程数：50"></a>1.1  目前程序中写死了线程数：50</h5><h5 id="1-2-相应的数据从云平台按照默认全部方式导出数据。相应的内网IP和外网IP在第13，14行。华为云需要单独进行处理下数据。阿里云只需要插入行数满足就OK"><a href="#1-2-相应的数据从云平台按照默认全部方式导出数据。相应的内网IP和外网IP在第13，14行。华为云需要单独进行处理下数据。阿里云只需要插入行数满足就OK" class="headerlink" title="1.2 相应的数据从云平台按照默认全部方式导出数据。相应的内网IP和外网IP在第13，14行。华为云需要单独进行处理下数据。阿里云只需要插入行数满足就OK."></a>1.2 相应的数据从云平台按照默认全部方式导出数据。相应的内网IP和外网IP在第13，14行。华为云需要单独进行处理下数据。阿里云只需要插入行数满足就OK.</h5><h5 id="1-3-导出的csv文件可以放在单一的文件夹下，或者分别防止在三个路径下。可以扫描到所有的csv后缀文件名。"><a href="#1-3-导出的csv文件可以放在单一的文件夹下，或者分别防止在三个路径下。可以扫描到所有的csv后缀文件名。" class="headerlink" title="1.3 导出的csv文件可以放在单一的文件夹下，或者分别防止在三个路径下。可以扫描到所有的csv后缀文件名。"></a>1.3 导出的csv文件可以放在单一的文件夹下，或者分别防止在三个路径下。可以扫描到所有的csv后缀文件名。</h5><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>PYTHON 3.8 默认，无其他的扩展包。</p>
<h2 id="threadingportscan-py-用于多线程端口扫描及将结果写入csv-文件中。"><a href="#threadingportscan-py-用于多线程端口扫描及将结果写入csv-文件中。" class="headerlink" title="threadingportscan.py  用于多线程端口扫描及将结果写入csv 文件中。"></a>threadingportscan.py  用于多线程端口扫描及将结果写入csv 文件中。</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/env python</span><br><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># 华为云平台导出的数据需要进行一定的处理，换下行和列。</span><br><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">from</span> checkpms <span class="hljs-keyword">import</span> ip_address_list<br><span class="hljs-keyword">from</span> checkpms <span class="hljs-keyword">import</span> find_Server_Detail<br><br><span class="hljs-comment"># 获取当前主机的Ip地址。</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_host_ip</span>():</span><br>    <span class="hljs-keyword">try</span>:<br>        p = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br>        p.connect((<span class="hljs-string">&#x27;8.8.8.8&#x27;</span>, <span class="hljs-number">80</span>))<br>        ip = p.getsockname()[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">finally</span>:<br>        p.close()<br>    <span class="hljs-keyword">return</span> ip<br><br><span class="hljs-comment"># 用于多线程的资源锁定。在这个项目中，则使用来处理写文件操作。</span><br>lock = threading.Lock()<br><span class="hljs-comment"># 存放内容</span><br>http_URL = []<br><br><span class="hljs-comment"># 网站url</span><br>http_website = []<br><span class="hljs-comment"># 每个线程分配的url</span><br>urlSepList = []<br><br>totally_ipaddress = ip_address_list()<br><br><span class="hljs-comment"># 分离文件名 给每个线程分一个</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">separateName</span>(<span class="hljs-params">threadCount</span>):</span><br>    <span class="hljs-comment"># 使用 math.ceil 函数处理了bug，向上取整，从而使得原来的IP丢失问题得到解决。</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(totally_ipaddress), math.ceil(<span class="hljs-built_in">len</span>(totally_ipaddress) / threadCount)):<br>        <span class="hljs-comment"># urlSepList 将portlist 分成了6段 ip段值，前5个每段106个IP，后一个104（threadCount=6的情况下）</span><br>        urlSepList.append(totally_ipaddress[i:i + math.ceil(<span class="hljs-built_in">len</span>(totally_ipaddress) / threadCount)])<br><br><br><span class="hljs-comment"># 多线程函数</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">multithreading</span>(<span class="hljs-params">threadCount,portlist2</span>):</span><br>    separateName(threadCount)  <span class="hljs-comment"># 先分离</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, threadCount - <span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># 运行多个单线程，构成多线程。其中参数时单线程中定应的参数。</span><br>        t = threading.Thread(target=run_one_thread, args=(urlSepList[i],portlist2))<br>        t.start()<br><br><br><span class="hljs-comment"># 每个线程的运作 ,url_list 是按照线程数分出的ip段。</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_one_thread</span>(<span class="hljs-params">url_list,portlist2</span>):</span><br>    <span class="hljs-keyword">for</span> port <span class="hljs-keyword">in</span> portlist2:<br>        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> url_list:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;开始核查IP地址&quot;</span>+<span class="hljs-built_in">str</span>(url) + <span class="hljs-string">&quot;端口号为&quot;</span>, <span class="hljs-built_in">str</span>(port))<br>            ok_f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;%d&quot;</span> % port + <span class="hljs-string">&quot;-&quot;</span> + get_host_ip() + <span class="hljs-string">&quot;  port outside.csv&quot;</span>, <span class="hljs-string">&quot;a+&quot;</span>,encoding=<span class="hljs-string">&#x27;GB2312&#x27;</span>)<br>            <span class="hljs-keyword">try</span>:<br>                s = socket.socket(AF_INET, SOCK_STREAM)<br>                s.settimeout(<span class="hljs-number">3</span>)<br>                s.connect((url, port))<br>                <span class="hljs-comment"># 多线程情况下的资源锁定。 lock.acquire()</span><br>                lock.acquire()<br>                <span class="hljs-built_in">print</span>(url + <span class="hljs-string">&quot; is open&quot;</span> + <span class="hljs-string">&quot; %d&quot;</span> % port)<br><br>                ok_f.write(url +<span class="hljs-string">&quot;\n&quot;</span>+find_Server_Detail(url) + <span class="hljs-string">&quot;\n&quot;</span>)<br>                <span class="hljs-comment"># print(&#x27;[+] %d open&#x27; % port)</span><br>                lock.release()<br>                s.close()<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                <span class="hljs-comment"># raise e</span><br>                <span class="hljs-keyword">pass</span><br>            ok_f.close()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    portlist = [<span class="hljs-number">80</span>,<span class="hljs-number">334</span>,<span class="hljs-number">21</span>,<span class="hljs-number">22</span>,<span class="hljs-number">23</span>,<span class="hljs-number">53</span>,<span class="hljs-number">138</span>,<span class="hljs-number">139</span>,<span class="hljs-number">445</span>,<span class="hljs-number">6379</span>]<br>    multithreading(<span class="hljs-number">50</span>,portlist)<br><br></code></pre></td></tr></table></figure>


<h2 id="checkpms-py-用于提供服务器IP列表和服务器详情信息返回的两个函数。"><a href="#checkpms-py-用于提供服务器IP列表和服务器详情信息返回的两个函数。" class="headerlink" title="checkpms.py 用于提供服务器IP列表和服务器详情信息返回的两个函数。"></a>checkpms.py 用于提供服务器IP列表和服务器详情信息返回的两个函数。</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-comment"># 对于本地的仓库，仅需要commit 而无需进行push.</span><br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">import</span> os<br><br>filename_list = []<br>exclude_list = [<span class="hljs-string">&quot;公网IP&quot;</span>, <span class="hljs-string">&#x27;主IPv4公网IP&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;主IPv4内网IP&#x27;</span>, <span class="hljs-string">&#x27;内网IP&#x27;</span>, <span class="hljs-string">&#x27;私有IP地址&#x27;</span>,<span class="hljs-string">&#x27;弹性公网IP&#x27;</span>]<br>path1 = <span class="hljs-string">&quot;D:\\文档\wyn\\A日常安全检查\\云平台主机端口安全检查\\ali_cloud_address\\&quot;</span><br>path2 = <span class="hljs-string">&quot;D:\\文档\\wyn\\A日常安全检查\\云平台主机端口安全检查\\tencent_cloud_address\\&quot;</span><br>path3 = <span class="hljs-string">&quot;D:\\文档\\wyn\\A日常安全检查\\云平台主机端口安全检查\\huawei_cloud_address\\&quot;</span><br><span class="hljs-comment"># path = [path1,path2,path3]</span><br><span class="hljs-comment"># path = &quot;D:\\文档\wyn\A日常安全检查\\绿云-PMS系统核查\\&quot;</span><br>PATH_LIST = [path1, path2, path3]<br><br><span class="hljs-comment"># 函数作用为对单个路径中的csv文件，形成文件列表。</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find_filelist</span>(<span class="hljs-params">path</span>):</span><br>    file_name = []<br>    a = os.listdir(path)<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> a:<br>        <span class="hljs-keyword">if</span> os.path.splitext(j)[<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;.csv&#x27;</span>:<br>            file_name.append(j)<br>    <span class="hljs-keyword">return</span> file_name<br><br><br><span class="hljs-comment"># 函数作用为返回所有云服务器的Ip地址列表，并且输出相应的IP列表长度。</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ip_address_list</span>():</span><br>    ip_list = []<br>    ip_list_inside = []<br>    filename_list = []<br>    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> PATH_LIST:<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(find_filelist(path)) != <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> find_filelist(path):<br>                filename_list.append(j)<br>            <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filename_list:<br>                csv_file = csv.reader(<span class="hljs-built_in">open</span>(path + filename, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>                <span class="hljs-keyword">for</span> stu <span class="hljs-keyword">in</span> csv_file:<br>                    <span class="hljs-comment"># print(stu[11])</span><br>                    <span class="hljs-comment"># 对于华为云导出的数据中外网Ip 后面跟了带宽。如果用python 处理稍显麻烦，则用excel处理。（数据-分列-选择空格 即可）</span><br>                    <span class="hljs-comment"># 另外华为云的数据需要将公网ip 和 内弯IP换下列。</span><br>                    <span class="hljs-keyword">if</span> stu[<span class="hljs-number">11</span>] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> exclude_list:<br>                         ip_list.append(stu[<span class="hljs-number">11</span>])<br>                    <span class="hljs-keyword">if</span> stu[<span class="hljs-number">12</span>] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> exclude_list:<br>                        ip_list_inside.append(stu[<span class="hljs-number">12</span>])<br>            filename_list = []<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(ip_list))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(ip_list_inside))<br>    ip_list = ip_list_inside + ip_list<br><br>    <span class="hljs-keyword">return</span> (ip_list)<br><span class="hljs-comment"># 函数的作用在于当发现端口开放时，返回相应的服务器的详情数据。</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find_Server_Detail</span>(<span class="hljs-params">url</span>):</span><br><br>    result = <span class="hljs-literal">None</span><br>    filename_list = []<br>    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> PATH_LIST:<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(find_filelist(path)) != <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> find_filelist(path):<br>                filename_list.append(j)<br>            <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filename_list:<br>                csv_file = csv.reader(<span class="hljs-built_in">open</span>(path + filename, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>                <span class="hljs-keyword">for</span> stu <span class="hljs-keyword">in</span> csv_file:<br>                    <span class="hljs-comment">#print(stu)</span><br>                    <span class="hljs-keyword">if</span> stu[<span class="hljs-number">11</span>] == url <span class="hljs-keyword">or</span> stu[<span class="hljs-number">12</span>] == url:<br>                        result = stu<br><br>            filename_list = []<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(result)<br><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(find_Server_Detail(<span class="hljs-string">&#x27;88.88.88.88&#x27;</span>))<br><br><br><br></code></pre></td></tr></table></figure>
<h2 id="python-在性能，规范化，协作性-方面都被很多人所诟病。-希望我们在写代码的时候，时刻注意这些问题，避免在代码本身缺陷方面不加任何形式的规避和优化。每种语言的特点和劣势都比较明显，选择了，就深爱，深爱就要共同进步。"><a href="#python-在性能，规范化，协作性-方面都被很多人所诟病。-希望我们在写代码的时候，时刻注意这些问题，避免在代码本身缺陷方面不加任何形式的规避和优化。每种语言的特点和劣势都比较明显，选择了，就深爱，深爱就要共同进步。" class="headerlink" title="python 在性能，规范化，协作性 方面都被很多人所诟病。 希望我们在写代码的时候，时刻注意这些问题，避免在代码本身缺陷方面不加任何形式的规避和优化。每种语言的特点和劣势都比较明显，选择了，就深爱，深爱就要共同进步。"></a>python 在性能，规范化，协作性 方面都被很多人所诟病。 希望我们在写代码的时候，时刻注意这些问题，避免在代码本身缺陷方面不加任何形式的规避和优化。每种语言的特点和劣势都比较明显，选择了，就深爱，深爱就要共同进步。</h2></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script>
  </div>
</article>












		<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
		<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
		<!--<script src="//cdn.jsdelivr.net/npm/leancloud-storage@latest/dist/av-min.js"></script>
    <script src='//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js'></script>-->
	<div id="vcomments"></div>
	<script>
		var notify = false == true ? true : false;
		var verify = false == true ? true : false;
		var visitor = true == true ? true : false;
  new Valine({
      el: '#vcomments',
				notify: notify,
				verify: verify,
    	app_id: 'blb6PJsThCi2aLC84uljjQzT-gzGzoHsz',
      app_key: '1PBJebm7VF0AiFpsf6Hhapdv',
			lang: 'en',
			placeholder: 'ヾﾉ≧∀≦)o快来评论一下吧!',
			avatar: 'monsterid',
			pageSize: 10,
			visitor: visitor
        });
    </script>






        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/search/">搜索</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/zhuxinkai.site/">zhuxinkai.site</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%AF%B9%E5%A4%9A%E4%B8%AA%E4%BA%91%E5%9C%BA%E6%99%AF%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A4%A7%E9%87%8F%E7%9A%84%E8%A7%84%E5%88%99%E8%B0%83%E6%95%B4%EF%BC%8C%E4%B8%B4%E6%97%B6%E8%A7%84%E5%88%99%EF%BC%8C%E5%8F%98%E6%9B%B4%EF%BC%8C%E5%AE%89%E5%85%A8%E7%BB%84%E9%94%99%E8%AF%AF%E9%85%8D%E7%BD%AE%E7%AD%89%E3%80%82%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E5%AF%B9%E5%A4%9A%E4%B8%AA%E4%BA%91%E7%AB%AF%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E8%A1%8C%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F%E3%80%82"><span class="toc-number">1.</span> <span class="toc-text">面对多个云场景的应用，服务器大量的规则调整，临时规则，变更，安全组错误配置等。所以需要对多个云端的服务器进行端口扫描。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">使用说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-%E7%9B%AE%E5%89%8D%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%86%99%E6%AD%BB%E4%BA%86%E7%BA%BF%E7%A8%8B%E6%95%B0%EF%BC%9A50"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">1.1  目前程序中写死了线程数：50</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-%E7%9B%B8%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BB%8E%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%8C%89%E7%85%A7%E9%BB%98%E8%AE%A4%E5%85%A8%E9%83%A8%E6%96%B9%E5%BC%8F%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E3%80%82%E7%9B%B8%E5%BA%94%E7%9A%84%E5%86%85%E7%BD%91IP%E5%92%8C%E5%A4%96%E7%BD%91IP%E5%9C%A8%E7%AC%AC13%EF%BC%8C14%E8%A1%8C%E3%80%82%E5%8D%8E%E4%B8%BA%E4%BA%91%E9%9C%80%E8%A6%81%E5%8D%95%E7%8B%AC%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86%E4%B8%8B%E6%95%B0%E6%8D%AE%E3%80%82%E9%98%BF%E9%87%8C%E4%BA%91%E5%8F%AA%E9%9C%80%E8%A6%81%E6%8F%92%E5%85%A5%E8%A1%8C%E6%95%B0%E6%BB%A1%E8%B6%B3%E5%B0%B1OK"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">1.2 相应的数据从云平台按照默认全部方式导出数据。相应的内网IP和外网IP在第13，14行。华为云需要单独进行处理下数据。阿里云只需要插入行数满足就OK.</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-%E5%AF%BC%E5%87%BA%E7%9A%84csv%E6%96%87%E4%BB%B6%E5%8F%AF%E4%BB%A5%E6%94%BE%E5%9C%A8%E5%8D%95%E4%B8%80%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%EF%BC%8C%E6%88%96%E8%80%85%E5%88%86%E5%88%AB%E9%98%B2%E6%AD%A2%E5%9C%A8%E4%B8%89%E4%B8%AA%E8%B7%AF%E5%BE%84%E4%B8%8B%E3%80%82%E5%8F%AF%E4%BB%A5%E6%89%AB%E6%8F%8F%E5%88%B0%E6%89%80%E6%9C%89%E7%9A%84csv%E5%90%8E%E7%BC%80%E6%96%87%E4%BB%B6%E5%90%8D%E3%80%82"><span class="toc-number">2.0.0.3.</span> <span class="toc-text">1.3 导出的csv文件可以放在单一的文件夹下，或者分别防止在三个路径下。可以扫描到所有的csv后缀文件名。</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83"><span class="toc-number">3.</span> <span class="toc-text">环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#threadingportscan-py-%E7%94%A8%E4%BA%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F%E5%8F%8A%E5%B0%86%E7%BB%93%E6%9E%9C%E5%86%99%E5%85%A5csv-%E6%96%87%E4%BB%B6%E4%B8%AD%E3%80%82"><span class="toc-number">4.</span> <span class="toc-text">threadingportscan.py  用于多线程端口扫描及将结果写入csv 文件中。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#checkpms-py-%E7%94%A8%E4%BA%8E%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1%E5%99%A8IP%E5%88%97%E8%A1%A8%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%A6%E6%83%85%E4%BF%A1%E6%81%AF%E8%BF%94%E5%9B%9E%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E3%80%82"><span class="toc-number">5.</span> <span class="toc-text">checkpms.py 用于提供服务器IP列表和服务器详情信息返回的两个函数。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python-%E5%9C%A8%E6%80%A7%E8%83%BD%EF%BC%8C%E8%A7%84%E8%8C%83%E5%8C%96%EF%BC%8C%E5%8D%8F%E4%BD%9C%E6%80%A7-%E6%96%B9%E9%9D%A2%E9%83%BD%E8%A2%AB%E5%BE%88%E5%A4%9A%E4%BA%BA%E6%89%80%E8%AF%9F%E7%97%85%E3%80%82-%E5%B8%8C%E6%9C%9B%E6%88%91%E4%BB%AC%E5%9C%A8%E5%86%99%E4%BB%A3%E7%A0%81%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%97%B6%E5%88%BB%E6%B3%A8%E6%84%8F%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%EF%BC%8C%E9%81%BF%E5%85%8D%E5%9C%A8%E4%BB%A3%E7%A0%81%E6%9C%AC%E8%BA%AB%E7%BC%BA%E9%99%B7%E6%96%B9%E9%9D%A2%E4%B8%8D%E5%8A%A0%E4%BB%BB%E4%BD%95%E5%BD%A2%E5%BC%8F%E7%9A%84%E8%A7%84%E9%81%BF%E5%92%8C%E4%BC%98%E5%8C%96%E3%80%82%E6%AF%8F%E7%A7%8D%E8%AF%AD%E8%A8%80%E7%9A%84%E7%89%B9%E7%82%B9%E5%92%8C%E5%8A%A3%E5%8A%BF%E9%83%BD%E6%AF%94%E8%BE%83%E6%98%8E%E6%98%BE%EF%BC%8C%E9%80%89%E6%8B%A9%E4%BA%86%EF%BC%8C%E5%B0%B1%E6%B7%B1%E7%88%B1%EF%BC%8C%E6%B7%B1%E7%88%B1%E5%B0%B1%E8%A6%81%E5%85%B1%E5%90%8C%E8%BF%9B%E6%AD%A5%E3%80%82"><span class="toc-number">6.</span> <span class="toc-text">python 在性能，规范化，协作性 方面都被很多人所诟病。 希望我们在写代码的时候，时刻注意这些问题，避免在代码本身缺陷方面不加任何形式的规避和优化。每种语言的特点和劣势都比较明显，选择了，就深爱，深爱就要共同进步。</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&text=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&is_video=false&description=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=python 多线程扫描及资源冲突锁定应用&body=Check out this article: https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&title=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&name=python 多线程扫描及资源冲突锁定应用&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://www.buhuixiu.com/2020/07/22/python-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%89%AB%E6%8F%8F%E5%8F%8A%E8%B5%84%E6%BA%90%E5%86%B2%E7%AA%81%E9%94%81%E5%AE%9A%E5%BA%94%E7%94%A8/&t=python 多线程扫描及资源冲突锁定应用"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-right">
    Copyright &copy;
    
    
    2016-2021
    Sampson.Z
<img src="https://www.buhuixiu.com/images/jgawb.png">
<a href="http://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">粤ICP备19066509号</a>

  
  
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/search/">搜索</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/zhuxinkai.site/">zhuxinkai.site</a></li>
        
      </ul>
    </nav>
  



        <!-- 不蒜子统计 -->
        <span id="busuanzi_container_site_pv">
                本站总访问量<span id="busuanzi_value_site_pv"></span>次
        </span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv" style='display:none'>
                本站访客数<span id="busuanzi_value_site_uv"></span>人
        </span>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

</div>


</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
